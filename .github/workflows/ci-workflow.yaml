name: Thing

on: [push]

jobs:
  conda:
    runs-on: ubuntu-18.04
    steps:
    # - uses: docker://continuumio/miniconda3:4.7.12
    - run: conda install -q -y -c conda-forge numpy
    - run: source $CONDA/bin/activate base
    - uses: actions/checkout@v2
    - run: /usr/share/miniconda/bin/python pythonthings2.py
    - run: /usr/share/miniconda/bin/python pythonthings.py
  julia:
    runs-on: ubuntu-18.04
    steps:
    - uses: docker://julia:1.3
    # - run: docker run julia:1.3
    - run: docker ps
    - uses: actions/checkout@v2
    - run: if [[ -a .git/shallow ]]; then git fetch --unshallow; fi
    - run: /usr/share/julia/bin/julia --project -e 'using Pkg; Pkg.test("Dionysus"; coverage=true)'
